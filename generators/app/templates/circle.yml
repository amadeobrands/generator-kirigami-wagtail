---
machine:
  python:
    version: 3.6.0
  node:
    version: 7.7.4
  environment:
    DATABASE_URL: postgresql://ubuntu:@127.0.0.1:5432/circle_test
    DJANGO_ENV: development
    SECRET_KEY: test-key

dependencies:
  post:
    - pip install flake8
    - npm install -g sass-lint

test:
  override:
    - npm run lint
    - python manage.py test

deployment:
  staging:
    branch: master
    commands:
      - git remote add staging ${DOKKU_REMOTE}
      - git push staging master
